<div class="app-container" [class.ag-dark-mode]="settings.isDarkMode">
  <!-- Header -->
  <header class="app-header">
    <h1>ğŸ” ng-agentation Demo</h1>
    <p>Angular Context Insight Agent for AI-assisted Development</p>
    <div class="instructions">
      Click the <span class="kbd">â–¶</span> button in the toolbar to start recording markers
    </div>
  </header>

  <!-- Main Content -->
  <main class="app-main">
    <!-- Products Section -->
    <section class="section">
      <h2>ğŸ“¦ Product Cards</h2>
      <p class="section-description">Click on any product card to add a marker while recording.</p>
      <div class="products-grid">
        <demo-product-card
          *ngFor="let product of products"
          [name]="product.name"
          [price]="product.price"
          [originalPrice]="product.originalPrice"
          [imageUrl]="product.imageUrl"
          [inStock]="product.inStock"
          [rating]="product.rating"
          [reviewCount]="product.reviewCount"
          [tags]="product.tags || []"
          (addToCart)="onAddToCart($event)"
          (addToWishlist)="onAddToWishlist($event)"
        ></demo-product-card>
      </div>
    </section>

    <!-- Buttons Section -->
    <section class="section">
      <h2>ğŸ”˜ Submit Buttons</h2>
      <p class="section-description">Inspect different button states and variants.</p>
      <div class="buttons-grid">
        <demo-submit-button
          label="Submit Order"
          loadingLabel="Processing..."
          [isLoading]="isSubmitting"
          [disabled]="false"
          variant="primary"
          icon="ğŸ›’"
          (clicked)="onSubmit()"
        ></demo-submit-button>

        <demo-submit-button
          label="Cancel"
          [disabled]="false"
          variant="secondary"
          icon="âœ–"
        ></demo-submit-button>

        <demo-submit-button
          label="Delete Account"
          [disabled]="false"
          variant="danger"
          icon="ğŸ—‘"
        ></demo-submit-button>

        <demo-submit-button
          [label]="submitSuccess ? 'Success!' : 'Disabled Button'"
          [disabled]="!submitSuccess"
          [variant]="submitSuccess ? 'success' : 'primary'"
          [icon]="submitSuccess ? 'âœ“' : 'ğŸ”’'"
        ></demo-submit-button>
      </div>
    </section>

    <!-- Instructions Section -->
    <section class="section instructions-section">
      <h2>ğŸ“– How to Use (v2)</h2>
      <div class="instruction-cards">
        <div class="instruction-card">
          <div class="instruction-number">1</div>
          <h3>Start Recording</h3>
          <p>Click the <strong>â–¶</strong> button in the bottom toolbar to start.</p>
        </div>
        <div class="instruction-card">
          <div class="instruction-number">2</div>
          <h3>Mark Components</h3>
          <p>Click on multiple components. Each gets a numbered marker.</p>
        </div>
        <div class="instruction-card">
          <div class="instruction-number">3</div>
          <h3>Add Intent</h3>
          <p>Open the ğŸ‘ panel to add descriptions for each marker.</p>
        </div>
        <div class="instruction-card">
          <div class="instruction-number">4</div>
          <h3>Copy All</h3>
          <p>Click ğŸ“‹ to copy all markers as Markdown to your AI.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <p>ng-agentation v2.0.0 | Multi-marker Support</p>
  </footer>
</div>

<!-- ng-agentation Components -->

<!-- Overlay (å¤šé¸æ¨™è¨˜) -->
<ag-overlay
  [markers]="session.markers"
  [settings]="settings"
  [isRecording]="toolbarState.isRecording"
  (markerAdded)="onMarkerAdded($event)"
  (markerDeleted)="onDeleteMarker($event)"
  (recordingChanged)="toolbarState.isRecording = $event"
></ag-overlay>

<!-- Toolbar (æµ®å‹•å·¥å…·åˆ—) -->
<ag-toolbar
  [session]="session"
  [settings]="settings"
  [state]="toolbarState"
  (startRecording)="onStartRecording()"
  (stopRecording)="onStopRecording()"
  (toggleMarkers)="onToggleMarkers()"
  (copyToClipboard)="onCopyToClipboard()"
  (clearMarkers)="onClearMarkers()"
  (toggleSettings)="onToggleSettings()"
  (toggleMinimize)="onToggleMinimize()"
  (closeToolbar)="onCloseToolbar()"
></ag-toolbar>

<!-- Settings Panel -->
<ag-settings-panel
  *ngIf="toolbarState.showSettings"
  [settings]="settings"
  (settingsChange)="onSettingsChange($event)"
  (closed)="toolbarState.showSettings = false"
></ag-settings-panel>

<!-- Markers Panel -->
<ag-markers-panel
  *ngIf="toolbarState.showMarkers"
  [markers]="session.markers"
  (deleteMarker)="onDeleteMarker($event)"
  (updateIntent)="onUpdateIntent($event)"
  (scrollToMarker)="onScrollToMarker($event)"
  (closed)="toolbarState.showMarkers = false"
></ag-markers-panel>
